/* ──────────────────────────────────────────────────────────────
   ProfAI • Playful Edu UI (v2)
   Kid-first: big type, soft colors, gentle motion, zero clutter
   ---------------------------------------------------------------- */

:root {
  /* Palette (calm + cheerful) */
  --mint: #68e1a2;
  --sky: #8fd3ff;
  --grape: #bba5ff;
  --sun: #ffd166;
  --berry: #ff7aa2;
  --ink: #10212b;

  --bg: #f7fbff;
  --surface: #ffffff;
  --text: #10212b;
  --muted: #5a6a75;
  --border: #e6eef4;

  /* Sizing & rhythm (bigger = easier) */
  --radius-xl: 26px;
  --radius: 20px;
  --radius-sm: 14px;

  --space-1: .5rem;
  --space-2: 1rem;
  --space-3: 1.5rem;
  --space-4: 2rem;
  --space-5: 2.6rem;

  --container: 1240px;

  /* Motion (gentle) */
  --dur-fast: .1s;
  --dur: .2s;
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }

body {
  margin: 0;
  background:
    radial-gradient(60rem 40rem at -20% -30%, rgba(143,211,255,.25), transparent 60%),
    radial-gradient(50rem 32rem at 120% -30%, rgba(104,225,162,.18), transparent 60%),
    var(--bg);
  color: var(--text);
  font-family: "Nunito", ui-rounded, "Segoe UI", system-ui, -apple-system, Roboto, Helvetica, Arial, sans-serif;
  font-size: 20px;   /* BIG & comfy */
  line-height: 1.7;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a { color: #0f7bdc; text-decoration: none; }
a:hover { text-decoration: underline; }

:focus-visible { outline: none; box-shadow: 0 0 0 4px rgba(15,123,220,.18); border-radius: 14px; }

/* App shell */
.app {
  min-height: 100%;
  display: flex;
  flex-direction: column;
}

.app-header {
  position: sticky; top: 0; z-index: 20;
  background: rgba(247,251,255,.85);
  backdrop-filter: blur(6px);
  border-bottom: 2px solid var(--border);
  padding: var(--space-3) var(--space-4);
  display: flex; align-items: center; justify-content: space-between;
}

.app-header h1 {
  margin: 0;
  font-size: clamp(24px, 3.4vw, 34px);
  font-weight: 900;
  letter-spacing: .2px;
  color: var(--ink);
}

.user-info {
  display: flex; gap: .7rem; align-items: center;
  color: var(--muted); font-weight: 800; font-size: 1rem;
}
.lesson-count {
  background: #0f7bdc; color: #fff;
  padding: .45rem .9rem; border-radius: 999px;
}

.app-main {
  flex: 1;
  width: 100%;
  max-width: var(--container);
  margin: 0 auto;
  padding: var(--space-5) var(--space-4) var(--space-5);
}

/* Cards (airy, rounded, never cramped) */
.card {
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
  box-shadow: 0 10px 28px rgba(16,33,43,.06);
  transition: transform var(--dur), box-shadow var(--dur), border-color var(--dur);
  overflow-wrap: anywhere;
}
.card:hover { transform: translateY(-2px); box-shadow: 0 12px 34px rgba(16,33,43,.08); }
.card > * + * { margin-top: var(--space-3); }
.card h2, .card h3, .card h4 { margin: 0; }

/* Section accents (soft, friendly) */
.lesson-chunk { border-left: 12px solid var(--mint); }
.question-card { border-left: 12px solid var(--sky); }

/* Headings & text */
h2 { font-size: 34px; font-weight: 900; }
h3 { font-size: 24px; font-weight: 900; }
h4 { font-size: 20px; font-weight: 800; }
p  { margin: 0; color: var(--text); }
em { color: var(--muted); display: block; }

/* Lists — keep bullets inside card */
ul, ol { margin: 0; padding-left: 1.4rem; }
li { margin: .35rem 0; }

/* Buttons — chunky, high-contrast, satisfying */
.btn {
  display: inline-flex; align-items: center; justify-content: center;
  gap: .7rem;
  padding: 1.05rem 1.6rem;
  border-radius: 999px;
  border: 2px solid transparent;
  font-weight: 900;
  font-size: 1.05rem;
  line-height: 1;
  cursor: pointer;
  transition: transform var(--dur-fast), box-shadow var(--dur-fast), background var(--dur-fast), border-color var(--dur-fast);
  user-select: none;
}
.btn:disabled { opacity: .5; cursor: not-allowed; transform: none; }

.btn-primary {
  background: #0f7bdc; color: #fff;
  box-shadow: 0 8px 0 #0b5aa0;
}
.btn-primary:hover { transform: translateY(-1px) scale(1.02); }
.btn-primary:active { transform: translateY(2px) scale(0.99); box-shadow: 0 3px 0 #0b5aa0; }

.btn-ghost {
  background: #fff; color: var(--ink);
  border-color: var(--border);
}
.btn-outline {
  background: transparent; color: #0f7bdc; border-color: #0f7bdc;
}

/* Button row */
.actions { display: flex; gap: .8rem; flex-wrap: wrap; margin-top: var(--space-3); }

/* Forms / textarea */
.form-group { margin-bottom: var(--space-3); }
.form-label { display: block; margin-bottom: .5rem; font-weight: 900; }
.form-input, .response-section textarea {
  width: 100%;
  padding: 1.2rem 1.2rem;
  border-radius: 18px;
  border: 2px solid var(--border);
  background: #fff;
  font-size: 1.05rem;
  transition: border-color var(--dur), box-shadow var(--dur);
}
.form-input:focus, .response-section textarea:focus {
  border-color: #0f7bdc;
  box-shadow: 0 0 0 4px rgba(15,123,220,.14);
}
.response-section { margin-top: var(--space-3); }

/* Lesson content */
.lesson-content { margin-top: var(--space-3); }
.lesson-content h3 { margin-bottom: .3rem; }
.lesson-content p  { font-size: 1.1rem; }

.key-point {
  background: linear-gradient(0deg, #fff, #fff) padding-box,
              repeating-linear-gradient(90deg, var(--mint), var(--mint) 10px, transparent 10px, transparent 20px) border-box;
  border: 2px solid transparent;
  border-radius: 18px;
  padding: var(--space-3);
}

/* Sentiment feedback (clear, minimal color) */
.card[class*="sentiment-"] { border-left: 12px solid var(--sun); }
.sentiment-excellent { border-left-color: var(--mint); }
.sentiment-good      { border-left-color: var(--sky); }
.sentiment-fair      { border-left-color: var(--sun); }
.sentiment-poor      { border-left-color: var(--berry); }

.sentiment-metrics {
  display: flex; gap: 1.2rem; color: var(--muted);
  font-size: 1rem;
}

/* Progress bar — chunky & readable */
.progress-bar {
  width: 100%; height: 18px;
  background: #e9f3fb;
  border-radius: 999px; overflow: hidden;
  border: 2px solid #d9e9f6;
  margin: .6rem 0 0;
}
.progress-fill {
  height: 100%;
  background: #0f7bdc;
  transition: width .35s ease;
}

/* Assessment options — big tap targets */
.options { display: grid; gap: 1rem; }
.option {
  display: grid; grid-template-columns: auto 1fr; align-items: start; gap: 1rem;
  padding: var(--space-3);
  border-radius: 18px;
  border: 2px solid var(--border);
  background: #fff;
  transition: border-color var(--dur), transform var(--dur);
}
.option:hover { transform: translateY(-2px); border-color: #0f7bdc; }
.option input[type="radio"] { margin-top: .35rem; accent-color: #0f7bdc; font-size: 1.1rem; }

.assessment-controls {
  display: flex; justify-content: space-between; align-items: center;
  margin-top: var(--space-4);
}

.assessment-phase-indicator {
  background: #0f7bdc; color: #fff;
  padding: .55rem 1rem; border-radius: 999px;
  font-weight: 900; font-size: 1rem;
}

/* Enhanced results / progress */
.enhanced-results, .progress-summary {
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
}

.knowledge-analysis { display: grid; gap: var(--space-3); }
.strong-areas, .knowledge-gaps, .learning-path {
  background: #fff;
  border: 2px solid var(--border);
  border-left: 12px solid var(--sky);
  border-radius: 18px;
  padding: var(--space-3);
}
.strong-areas { border-left-color: var(--mint); }
.knowledge-gaps { border-left-color: var(--sun); }

/* Recommendations box */
.recommendations {
  padding: var(--space-3);
  background: #fff6d8;
  border: 2px solid #ffe59c;
  border-radius: 18px;
}

/* Loading */
.loading { display: grid; place-items: center; min-height: 40vh; color: var(--muted); }

/* Utilities */
.stack > * + * { margin-top: var(--space-3); }

/* Make adjacent top-level cards breathe */
.app-main > .card + .card { margin-top: var(--space-3); }

/* Small screens */
@media (max-width: 640px) {
  body { font-size: 19px; }
  .app-header { padding: var(--space-2) var(--space-3); }
  .app-main { padding: var(--space-4) var(--space-3) var(--space-4); }
  .assessment-controls { flex-direction: column; gap: 1rem; align-items: stretch; }
  .actions { gap: .6rem; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
}


/* Key Point — more breathing room + cohesive look */
.lesson-content .key-point {
  margin-top: var(--space-4);
  margin-bottom: var(--space-3);
  padding: calc(var(--space-3) + .2rem);
  border-radius: 18px;
  border: 2px dashed rgba(104,225,162,.55); /* mint */
  background: #f6fff9;
}
.lesson-content .key-point strong {
  display: block;
  margin-bottom: .35rem;
}

/* Put more space between the lesson card and Takeaways card */
.lesson-chunk + .card {
  margin-top: var(--space-4) !important;
}

/* Make the “Key Takeaways” list visually match the Key Point panel */
.card h3 + ul {
  margin-top: var(--space-3) !important;
  padding: var(--space-3);
  border: 2px dashed rgba(104,225,162,.55);
  border-radius: 18px;
  background: #f6fff9;
}

/* Slightly larger gap under the progress bar for cleaner composition */
.card .progress-bar {
  margin-top: .75rem;
  margin-bottom: .35rem;
}

/* ===== Setup/Login splash (CSS-only, gentle animated background) =====
   Targets the wrapper that contains the #name input on the setup page.
   Falls back gracefully if :has() is unsupported. */
.app > div:has(#name) {
  position: relative;
  background:
    radial-gradient(1200px 700px at 15% 0%, rgba(143,211,255,.35), transparent 60%),
    radial-gradient(1100px 600px at 85% 15%, rgba(104,225,162,.30), transparent 60%),
    linear-gradient(135deg, #cfeaff 0%, #f7fbff 100%) !important; /* override inline gradient */
  background-size: 140% 140%, 140% 140%, 100% 100%;
  animation: splashMove 24s ease-in-out infinite alternate;
}

/* Soft floating glow blobs */
.app > div:has(#name)::before,
.app > div:has(#name)::after {
  content: "";
  position: absolute;
  width: 240px; height: 240px;
  border-radius: 50%;
  filter: blur(28px);
  opacity: .32;
  pointer-events: none;
  animation: floaty 16s ease-in-out infinite alternate;
}
.app > div:has(#name)::before { left: 6%;  top: 12%;  background: var(--mint); }
.app > div:has(#name)::after  { right: 6%; bottom: 10%; background: var(--sky); animation-duration: 20s; }

/* Make the setup card feel special but still simple */
.app > div:has(#name) .card {
  border: 0;
  border-radius: 28px;
  box-shadow: 0 14px 48px rgba(16,33,43,.12);
}

@keyframes splashMove {
  0%   { background-position: 0% 0%, 100% 15%, 0 0; }
  100% { background-position: 30% 15%, 70% 0%,   0 0; }
}
@keyframes floaty {
  from { transform: translateY(0); }
  to   { transform: translateY(-16px); }
}